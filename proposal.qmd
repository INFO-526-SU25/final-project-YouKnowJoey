---
title: "Graphically Pawsitive Vibes"
subtitle: "Proposal"
author: 
  - name: "Isle of Dogs"
    affiliations:
      - name: "School of Information, University of Arizona"
description: "This project will graphically depict trends, patterns, and analysis of Animal Shelter data derived from the TidyTuesday initiative. The dataset includes information about animals taken in and released from the shelter; there are variables such as intake type, outcome type, animal type, breed, age, and more. The primary goal of this project is to identify key factors that influence an animals outcome."
format:
  html:
    code-tools: true
    code-overflow: wrap
    code-line-numbers: true
    embed-resources: true
editor: visual
code-annotations: hover
execute:
  warning: false
---

```{r}
#| label: load-pkgs
#| message: false
#| echo: false

if (!require("pacman")) 
  install.packages("pacman, formattable, diagnose, dlookr")

pacman::p_load(tidyverse,
               tidytuesdayR,
               formattable,
               dlookr)
```

### Dataset

```{r}
longbeach <- tt_load("2025-03-04")
longbeach = longbeach$longbeach
```

```{r}
#| label: load-dataset
#| message: false

# Column Names
names(longbeach)

```

This TidyTuesday dataset is a conglomeration of different species retrieved in Long Beach, CA. It contains 22 columns and 29,787 rows that provides potential insights of rescued animals at the city's shelter. The data includes variables such as intake type, outcome type, animal type, age, breed, and geographical jurisdiction. We chose this dataset because it offers an opportunity to explore animal shelters and outcomes. Meaningful and relevant analysis could have direct implications for animal welfare policies and shelter resource management.

### Questions

1.  How do intake conditions and animal types affect the animal's outcome?

2.  Over the years 2021–2025, how have different species and intake conditions influenced the duration from intake to adoption?

## Analysis plan

For each question, we plan the following:

### 1. How do intake conditions and animal types affect the animal's outcome?

We will evaluate how `intake_condition` and `animal_type` influence the likelihood of outcomes for animals in a shelter environment. We hope to identify disparities to inform shelter strategies. For clarity and consistency, `animal_type` will be re-coded into `species_group` category to capture generalized trends across dogs, cats, and other species. For exploratory purposes, we'll use all 19 of `outcome_type`'s unique values. Dependent on the bar plot results, we may mutate `outcome_type` into a binary value of `death` and `non-death` outcome. 

``` {r}
longbeach |>
  distinct(outcome_type)
```

Independent Variables:

-   `intake_condition`

-   `animal_type`

Dependent Variables:

-   `outcome_type`

#### Proposed Visualizations

Proportion of Outcomes by Animal Type: Bar plot showing the proportion of `outcome_types` to each faceted `species_group`. This will highlight which outcomes dominate each species category.

Distribution of Outcomes Across Intake Condition: Bar plot showing distribution of `intake_condition` for a specific faceted `outcome_type`. This will identify which intake conditions are more likely to lead to certain outcome.


### 2. Over the years 2021–2025, how have different species and intake conditions influenced the duration from intake to adoption?

We'll mutate() a new variable `days_to_adoption` as the time difference between intake and outcome dates, then analyze its variation by `intake_year` and `outcome_type` across years. Because dogs and cats dominate the data, we collapse all other species into a three-level factor `species_group` (“Dog,” “Cat,” “Other”) for clearer comparisons.

Independent Variables:

-   `animal_type`

-   `intake_condition`

-   `intake_year` (derived from `intake_date`)

-   `outcome_type`

Dependent Variables:

-   `days_to_adoption` (`computed by outcome_date` - `intake_date`)

#### Proposed Visualizations

Time‐Series Lines: Median `days_to_adoption` by `intake_year` (2021–2025), faceted by `species_group`.

Violin Distribution: Yearly distribution of `days_to_adoption`, split by `intake_condition`

### Data Cleaning

We've introduced the participating variables. Now we'll analyze and transform our dataset to our visualization requirements.

```{r}
#| label: data-cleaning-analysis

longbeach |>
  diagnose() |>
  filter(variables %in% c("dob", "intake_date", "intake_condition", "animal_type",  "outcome_type")) |>
  formattable()
```

```{r}
#| label: data-cleaning-transformations

longbeach_clean <- longbeach |>
  
  # standardize intake_condition
  mutate(
    intake_condition = intake_condition |>
      str_squish()             # collapse multiple spaces
      |> str_replace_all("/", " ")  # replace slashes with spaces
      |> str_to_lower()             # convert to lowercase
  ) |>
  
  # create a simplified species_group
  mutate(
    species_group = case_when(
      animal_type == "dog" ~ "Dog",
      animal_type == "cat" ~ "Cat",
      TRUE ~ "Other"
    ) |> 
      factor(levels = c("Dog", "Cat", "Other"))
  ) |>
  
  # compute age_at_intake and flag unknowns
  mutate(
    age_at_intake = as.numeric(intake_date - dob) / 365,
    age_unknown   = is.na(age_at_intake)
  ) |>
  
  # compute days_to_adoption
  mutate(
    days_to_adoption = as.integer(outcome_date - intake_date)
  )

glimpse(longbeach_clean)
```

## Weekly Plan of Attack

| Task Name | Status | Due | Priority | Summary |
|---------------|---------------|---------------|---------------|---------------|
| Analysis of dataset and project decision | Complete | 2025-06-13 | High | Team found dataset, selected questions. Discussed approach and division of work |
| Data ingestion & cleaning | Started | 2025-06-13 | High | Load data; inspect structure; derive and clean data |
| Q1 & Q2 plot exploration and decision | Started | 2025-06-13 | High | Decide on plots and narrative |
| Draft narrative & interpretation | Not started | 2025-06-20 | High | Summarize results; write narrative for both questions |
| Finalize report & slides | Not started | 2025-06-30 | High | Refine visuals; polish text; build and rehearse presentation |
